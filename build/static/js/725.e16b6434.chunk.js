"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[725],{58289:(e,s,i)=>{i.d(s,{A:()=>t});i(9950);var n=i(18469);n.A.interceptors.request.use((function(e){let s;const i=localStorage.getItem("persist:root");if(i){var n=JSON.parse(i);if(null!==n&&void 0!==n&&n.authSlice){const e=JSON.parse(null===n||void 0===n?void 0:n.authSlice);s=null===e||void 0===e?void 0:e.token}}return e.headers.Authorization="Bearer ".concat(s),e.headers.common={Accept:"application/json, text/plain, */*","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},e}));const t={getList:()=>n.A.get("".concat("http://15.207.254.188:7001","/users/api/mock")),getLoginToken:e=>n.A.post("".concat("http://15.207.254.188:7001","/users/api/getLoginToken"),e)}},94725:(e,s,i)=>{i.r(s),i.d(s,{default:()=>T});var n=i(42074),t=i(60899),a=i(93230),r=i(82053),l=i(9950),o=i(28429),d=i(10300),c=i(97877),h=i(58289),m=i(3788),u=i(3198),x=i(24516),p=i(2046),A=i(25333),j=i(16497),g=i(66310),w=i(36080),v=i(10226),y=i(74745),b=i(29714),f=i(43939),k=i(15423),S=i(28994),C=i(12678),_=i(4729),E=i(44414);const L=()=>{const[e,s]=l.useState(!1),[i,L]=l.useState(!1),B=(0,d.wA)(),T=(0,o.Zp)(),q=(0,d.d4)((e=>e.authSlice.email)),z=(0,d.d4)((e=>e.authSlice.password)),D=(0,d.d4)((e=>e.authSlice.token));(0,l.useEffect)((()=>{F()}),[D]);const F=()=>{""!==D&&T("/")},I=()=>{L(!i)},N=e=>{e.preventDefault()};return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(f.l1,{initialValues:{email:q,password:z,submit:null},validationSchema:b.Ik().shape({email:b.Yj().email("Must be a valid email").max(255).required("Email is required"),password:b.Yj().max(255).required("Password is required")}),onSubmit:async(e,s)=>{let{setErrors:i,setStatus:n,setSubmitting:t}=s;try{!async function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const[n,t,a]=s;try{var r;const e=await h.A.getLoginToken(n);if(null!==e&&void 0!==e&&e.data&&null!==e&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.jwtToken){var l;const s={...n,token:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.jwtToken};B((0,c.hO)(s)),t({success:!1}),a(!1)}}catch(o){alert(o.message)}}(e,n,t)}catch(a){n({success:!1}),i({submit:a.message}),t(!1)}},children:l=>{let{errors:o,handleBlur:d,handleChange:c,handleSubmit:h,isSubmitting:b,touched:f,values:L}=l;return(0,E.jsx)("form",{noValidate:!0,onSubmit:h,children:(0,E.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,E.jsx)(t.Ay,{item:!0,xs:12,children:q}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsxs)(a.A,{spacing:1,children:[(0,E.jsx)(m.A,{htmlFor:"email-login",children:"Email Address"}),(0,E.jsx)(u.A,{id:"email-login",type:"email",value:L.email,name:"email",onBlur:d,onChange:c,placeholder:"Enter email address",fullWidth:!0,error:Boolean(f.email&&o.email)}),f.email&&o.email&&(0,E.jsx)(x.A,{error:!0,id:"standard-weight-helper-text-email-login",children:o.email})]})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsxs)(a.A,{spacing:1,children:[(0,E.jsx)(m.A,{htmlFor:"password-login",children:"Password"}),(0,E.jsx)(u.A,{fullWidth:!0,error:Boolean(f.password&&o.password),id:"-password-login",type:i?"text":"password",value:L.password,name:"password",onBlur:d,onChange:c,endAdornment:(0,E.jsx)(p.A,{position:"end",children:(0,E.jsx)(A.A,{"aria-label":"toggle password visibility",onClick:I,onMouseDown:N,edge:"end",size:"large",children:i?(0,E.jsx)(C.A,{}):(0,E.jsx)(_.A,{})})}),placeholder:"Enter password"}),f.password&&o.password&&(0,E.jsx)(x.A,{error:!0,id:"standard-weight-helper-text-password-login",children:o.password})]})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,sx:{mt:-1},children:(0,E.jsxs)(a.A,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,E.jsx)(j.A,{control:(0,E.jsx)(g.A,{checked:e,onChange:e=>s(e.target.checked),name:"checked",color:"primary",size:"small"}),label:(0,E.jsx)(r.A,{variant:"h6",children:"Keep me sign in"})}),(0,E.jsx)(w.A,{variant:"h6",component:n.N_,to:"",color:"text.primary",children:"Forgot Password?"})]})}),o.submit&&(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsx)(x.A,{error:!0,children:o.submit})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsx)(S.A,{children:(0,E.jsx)(v.A,{disableElevation:!0,disabled:b,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsx)(y.A,{children:(0,E.jsx)(r.A,{variant:"caption",children:" Login with"})})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsx)(k.A,{})})]})})}})})};var B=i(9330);const T=()=>(0,E.jsx)(B.A,{children:(0,E.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsxs)(a.A,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[(0,E.jsx)(r.A,{variant:"h3",children:"Login"}),(0,E.jsx)(r.A,{component:n.N_,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Don't have an account?"})]})}),(0,E.jsx)(t.Ay,{item:!0,xs:12,children:(0,E.jsx)(L,{})})]})})}}]);